<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
    "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
      xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
      xmlns:dc="http://purl.org/dc/elements/1.1/"
      xmlns:foaf="http://xmlns.com/foaf/0.1/">
  
  <head>
    
    
      
        <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
      
      
      <title>
        Ombuds Technical Specification » 
        Public Record
      </title>
      
      
        <!-- YUI CSS reset, fonts, base -->
        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?3.0.0/build/cssreset/reset-min.css&amp;3.0.0/build/cssfonts/fonts-min.css&amp;3.0.0/build/cssbase/base-min.css" media="screen, projection" />
        
        <link rel="stylesheet" type="text/css" href="media/css/style.css" media="screen, projection" />
        <link rel="stylesheet" type="text/css" href="media/css/pygments.css" media="screen, projection" />
      
      
      
      
      
        
      
    
  </head>
  
  <body >
    
      
      
        
          
  
    <ol id="breadcrumbs">
      
        <li class="crumb-0 not-last">
          
            <a href="./">index</a>
          
        </li>
      
        <li class="crumb-1 last">
          
            public-record
          
        </li>
      
    </ol> <!-- ol#breadcrumbs -->
  

        
      
      
      <div id="content">
        
        
        
        <!-- title: Public Record -->

<h1>DD01 Public Record Specification // DRAFT</h1>
<h3>Overview</h3>
<p>The single shared history created by what we call a "public record" is a central and novel concept to Ombuds.
In the same way that a block chain can define a "public ledger" that records all account balances of digital units of currency, a block chain can define a "public record" that digitally records all public statements submitted to it.
This documents discusses the practical implications of using the Bitcoin block chain as a public ledger.</p>
<h3>Status of This Document</h3>
<p>While this is not an RFC, the intention behind this document is to describe the system completely so that it is reproducible and well understood.
Please note this is a <strong>draft of a design</strong> that is subject to change. 
Do not rely the content of this document for any important decisions.
It has not been reviewed.</p>
<p>Alex, Nick -- Oct 2015</p>
<h3>Contents</h3>
<pre><code>1. Eventual Consistenty
  1.2. Unique State
</code></pre>
<h2>Eventual Consistency</h2>
<hr />
<p>To ensure that nodes agree to the state of the public record, <strong>only records that have more than six confirmations are committed to the record.</strong>
This means that bulletins that are generated by a user and not mined are <strong>left out of the public record.</strong>
It also means that every full node that is constructing the record from the Bitcoin block chain has <strong>the exact same public record</strong>.</p>
<p>Full relays can inform clients of unconfirmed and recently mined record. 
A relay just cannot claim that the record is in the official public record.
By enforcing this constrait on what can go into the public record, we are able to assert that any full node is reconstructing a well-defined, globally consistent history of immutable messages.
This additionally means that to full nodes that have the same chain tip can assert that two their copies of the public record are identical.</p>
<h3>Best Valid Chain Constraint</h3>
<p>The reason that the record is generated six blocks back from the chain tip is so that, with high confidence a user can assert that their message is stored permanently in that record.</p>
<h3>Unique State</h3>
<p>By enforcing the depth requirements all nodes even if they have an uncertain chain tip, will have the same public record.</p>
<pre><code>A &lt;-- B &lt;-- C &lt;-- D &lt;-- E &lt;-- F
|     |
</code></pre>
<p>p_A   p_B    </p>
<pre><code>A &lt;-- B &lt;-- C &lt;-- D &lt;-- X &lt;-- Y
|     |
</code></pre>
<p>p_A   p_B    </p>
<p>Forcing users to wait asserts to them that their record is actually stored.</p>
<h3>Forking Chain Events</h3>
<p>Drastic harm to the Bitcoin Network is done in the event of an unresolved fork.
Records that may be dropped as a result of such a chain event will be rebroadcast on a best effort basis.
This represents the one real challenge to the eventual consistence.
The other is an unknown exploit that changes either the public record or the bitcoin block chain.</p>
<h3>Derivation</h3>
<p>The block chain must remain available and effecient to rederive from some point.
A node that just joins the network can replay the blockchain and arrive at the same state as its peers.</p>
<h3>SQL DB</h3>
<p>Messages are placed in a SQL db. 
That DB supports multiple message types.
Future versions might add new messages or change existing message types.</p>
<h3>Redudancy and Availability Requirements</h3>
<p>Nodes that serve the public record will also serve the block chain in full.
(Possible to just serve public record without TX data, for network safeness)
    (maybe -- could split net with partially valid txs. (want oracle btc node))</p>
<h2>Encoding Messages</h2>
<pre><code>Two formats for storing data. Others exist. 
Future versions of node will support other formats.
You cannot stop this from happening.
</code></pre>
<h3>OP_RETURN</h3>
<pre><code>Messages that can go into UTXO will.
</code></pre>
<h3>Pay_to_PubKey</h3>
<pre><code>Messages that are too big, will be sliced up and placed in P2PKH txs.
This grows the UTXO
Redudancy advantage
DUST payments
</code></pre>
<h2>Excluded Messages</h2>
<pre><code>Miners can elect to not mine messages.
Nodes will not drop messages in the system that are bulletins.
They will be placed in a seperate DB... the ignored_set.
</code></pre>
<h3>Orphaned Messages</h3>
<pre><code>Mined, but then mined around.
</code></pre>
<h3>Ignored Messages</h3>
<pre><code>Never mined, dropped from mempools.
</code></pre>
<h2>Versioning</h2>
<p>V1&lt;--V2&lt;--V3&lt;-- Latest version supports old message formats.</p>
<p>Agreement of DB breaks off when new version adds fields that old nodes do not see, when this occurs their databases diverge.</p>
        
        
        
        
        <hr class="clear" />
      </div> <!-- div#content -->
      
      
      <div id="footer">
        <p>
          
            Ombuds Technical Specification —
          
          Powered by <a href="http://markdoc.org/">Markdoc</a>.
        </p>
      </div>
      
    
    
    
    <hr class="clear" />
  </body>
</html>